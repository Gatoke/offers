task createImageName {
    def details = versionDetails()
    def lastTag = details.lastTag
    def lastTagDistance = details.commitDistance
    def branch = details.branchName

    if (lastTagDistance > 0) {
        println "Error! Untagged commits: ${lastTagDistance}"
        println "Please, tag commits first."
        return
    }

    if (branch == null) {
        return
    }

    jib.to.image = "registry.hub.docker.com/gatoke/${rootProject.name}:${lastTag}"
}

tasks.jib.dependsOn(createImageName)
